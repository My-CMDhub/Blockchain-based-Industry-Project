<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Gateway Test Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container { margin-top: 30px; }
        .test-card { margin-bottom: 20px; }
        .success { color: green; }
        .error { color: red; }
        .pending { color: orange; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">Payment Gateway Test Dashboard</h1>
        
        <!-- Test Scenarios -->
        <div class="row">
            <!-- User Payment Flow -->
            <div class="col-md-6">
                <div class="card test-card">
                    <div class="card-header">
                        <h5>Test User Payment Flow</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Amount (ETH)</label>
                            <input type="number" class="form-control" id="testAmount" value="0.01" step="0.01">
                        </div>
                        <button class="btn btn-primary" onclick="testUserPayment()">Simulate Payment</button>
                        <div id="userPaymentResult" class="mt-3"></div>
                    </div>
                </div>
            </div>

            <!-- HD Wallet Operations -->
            <div class="col-md-6">
                <div class="card test-card">
                    <div class="card-header">
                        <h5>Test HD Wallet Operations</h5>
                    </div>
                    <div class="card-body">
                        <button class="btn btn-info mb-2" onclick="testWalletBalance()">Check Balance</button>
                        <button class="btn btn-warning mb-2" onclick="testWalletRecover()">Test Recovery</button>
                        <div id="walletTestResult" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Transaction Monitor -->
        <div class="card test-card">
            <div class="card-header">
                <h5>Transaction Monitor</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody id="transactionLog">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- System Status -->
        <div class="card">
            <div class="card-header">
                <h5>System Status</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="status-item">
                            <h6>Web3 Connection</h6>
                            <span id="web3Status" class="pending">Checking...</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="status-item">
                            <h6>HD Wallet</h6>
                            <span id="hdWalletStatus" class="pending">Checking...</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="status-item">
                            <h6>API Endpoints</h6>
                            <span id="apiStatus" class="pending">Checking...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulate user payment
        async function testUserPayment() {
            const amount = document.getElementById('testAmount').value;
            const result = document.getElementById('userPaymentResult');
            
            try {
                // Simulate payment process
                result.innerHTML = `<p class="pending">Processing payment of ${amount} ETH...</p>`;
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Simulate success
                result.innerHTML = `<p class="success">Payment successful! Transaction Hash: 0x${Math.random().toString(16).substr(2, 40)}</p>`;
                addToTransactionLog('Payment', amount, 'Success');
            } catch (error) {
                result.innerHTML = `<p class="error">Payment failed: ${error.message}</p>`;
                addToTransactionLog('Payment', amount, 'Failed');
            }
        }

        // Test wallet balance check
        async function testWalletBalance() {
            const result = document.getElementById('walletTestResult');
            
            try {
                result.innerHTML = `<p class="pending">Checking wallet balance...</p>`;
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const mockBalance = (Math.random() * 10).toFixed(4);
                result.innerHTML = `<p class="success">Current Balance: ${mockBalance} ETH</p>`;
                addToTransactionLog('Balance Check', mockBalance, 'Success');
            } catch (error) {
                result.innerHTML = `<p class="error">Balance check failed: ${error.message}</p>`;
            }
        }

        // Test wallet recovery
        async function testWalletRecover() {
            const result = document.getElementById('walletTestResult');
            
            try {
                result.innerHTML = `<p class="pending">Testing wallet recovery...</p>`;
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const mockAddress = '0x' + Math.random().toString(16).substr(2, 40);
                result.innerHTML = `<p class="success">Wallet recovered successfully! Address: ${mockAddress}</p>`;
                addToTransactionLog('Wallet Recovery', 'N/A', 'Success');
            } catch (error) {
                result.innerHTML = `<p class="error">Recovery test failed: ${error.message}</p>`;
            }
        }

        // Add transaction to log
        function addToTransactionLog(type, amount, status) {
            const tbody = document.getElementById('transactionLog');
            const row = tbody.insertRow(0);
            const time = new Date().toLocaleTimeString();
            
            row.innerHTML = `
                <td>${time}</td>
                <td>${type}</td>
                <td>${amount}</td>
                <td><span class="${status.toLowerCase()}">${status}</span></td>
                <td>Test transaction</td>
            `;
        }

        // Check system status
        async function checkSystemStatus() {
            // Simulate Web3 check
            setTimeout(() => {
                document.getElementById('web3Status').className = 'success';
                document.getElementById('web3Status').textContent = 'Connected';
            }, 1000);

            // Simulate HD Wallet check
            setTimeout(() => {
                document.getElementById('hdWalletStatus').className = 'success';
                document.getElementById('hdWalletStatus').textContent = 'Active';
            }, 1500);

            // Simulate API check
            setTimeout(() => {
                document.getElementById('apiStatus').className = 'success';
                document.getElementById('apiStatus').textContent = 'Operational';
            }, 2000);
        }

        // Initialize
        checkSystemStatus();
    </script>
</body>
</html>
